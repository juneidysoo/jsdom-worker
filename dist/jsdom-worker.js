function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=e(require("fs")),o=require("node-fetch"),n=e(o);function r(e){return e=e||Object.create(null),{on:function(t,o){(e[t]||(e[t]=[])).push(o)},off:function(t,o){e[t]&&e[t].splice(e[t].indexOf(o)>>>0,1)},emit:function(t,o){(e[t]||[]).slice().map(function(e){e(o)}),(e["*"]||[]).slice().map(function(e){e(t,o)})}}}var s,l=(function(e,t){t=e.exports=function(){for(var e,o="",n=0;n<32;n++)e=16*t.random()|0,n>4&&n<21&&!(n%4)&&(o+="-"),o+=(12===n?4:16===n?3&e|8:e).toString(16);return o};var o=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;t.isUUID=function(e){return o.test(e)},t.random=function(){return Math.random()}}(s={path:void 0,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},s.exports),s.exports);if(global.URL||(global.URL={}),global.URL.$$objects||(global.URL.$$objects=new Map,global.URL.createObjectURL=e=>{let t=l();return global.URL.$$objects[t]=e,"blob:http://localhost/"+t}),!global.fetch||!global.fetch.jsdomWorker){let e=global.fetch||n;global.fetch=function(n,r){return n instanceof URL&&(n=n.href),n.match(/^file:/)?new Promise((e,r)=>{e(new(global.Response||o.Response)(t.readFileSync(n.slice(7)),{status:200,statusText:"OK"}))}):n.match(/^blob:/)?new Promise((e,t)=>{let r=new FileReader;r.onload=()=>{const t=global.Response||o.Response;e(new t(r.result,{status:200,statusText:"OK"}))},r.onerror=()=>{t(r.error)};let s=n.match(/[^/]+$/)[0];r.readAsText(global.URL.$$objects[s])}):e.call(this,n,r)},global.fetch.jsdomWorker=!0}function a(e){this.type=e}global.document||(global.document={}),a.prototype.initEvent=Object,global.document.createEvent||(global.document.createEvent=function(e){return new(global[e]||a)(e)}),global.Worker=function(e){let t,o=[],n=r(),s=r(),l={onmessage:null,dispatchEvent:n.emit,addEventListener:n.on,removeEventListener:n.off,postMessage(e){s.emit("message",{data:e})},fetch:global.fetch,importScripts(){}};n.on("message",e=>{let o=l.onmessage||t("onmessage");o&&o.call(l,e)}),this.addEventListener=s.on,this.removeEventListener=s.off,this.dispatchEvent=s.emit,s.on("message",e=>{this.onmessage&&this.onmessage(e)}),this.postMessage=e=>{null!=o?o.push(e):n.emit("message",{data:e})},this.terminate=()=>{throw Error("Not Supported")},global.fetch(e).then(e=>e.text()).then(e=>{let n="var self=this,global=self";for(let e in l)n+=`,${e}=self.${e}`;t=Function(n+";\n"+e+'\nreturn function(n){return n=="onmessage"?onmessage:null;}').call(l);let r=o;o=null,r.forEach(this.postMessage)}).catch(e=>{s.emit("error",e),console.error(e)})};
//# sourceMappingURL=jsdom-worker.js.map
